<div class="ui tiny modal" id="modal-task-edit">
    <div class="header">Create new task</div>
    <div class="content">
        <form class="ui form">
            <div class="field">
                <label>Title</label>
                <input type="text" name="first-name" placeholder="First Name">
            </div>
            <div class="field">
                <label>Description</label>
                <textarea rows="3"></textarea>
            </div>
            <div class="field">
                <label>Time range</label>
                <select class="ui fluid dropdown" id="date-type">
                    <option value="day">Day</option>
                    <option value="day_range">Date range</option>
                    <option value="month">Month</option>
                </select>
            </div>

            <div class="field date-type" id="date-type-day">
                <label>Date</label>
                <div class="ui calendar" id="day">
                    <div class="ui input left icon">
                        <i class="calendar icon"></i>
                        <input type="text" placeholder="Start">
                    </div>
                </div>
            </div>

            <div class="two fields date-type" id="date-type-day_range">
                <div class="field">
                    <label>Start date</label>
                    <div class="ui calendar" id="rangestart">
                        <div class="ui input left icon">
                            <i class="calendar icon"></i>
                            <input type="text" placeholder="Start">
                        </div>
                    </div>
                </div>
                <div class="field">
                    <label>End date</label>
                    <div class="ui calendar" id="rangeend">
                        <div class="ui input left icon">
                            <i class="calendar icon"></i>
                            <input type="text" placeholder="End">
                        </div>
                    </div>
                </div>
            </div>

            <div class="field date-type" id="date-type-month">
                <label>Month</label>
                <div class="ui calendar" id="month">
                    <div class="ui input left icon">
                        <i class="time icon"></i>
                        <input type="text" placeholder="Time">
                    </div>
                </div>
            </div>

        </form>
    </div>
    <div class="actions">
        <div class="ui right labeled icon button close-modal">
            Cancel
            <i class="x icon"></i>
        </div>
        <div class="ui positive right labeled icon button">
            Add
            <i class="plus icon"></i>
        </div>
    </div>
</div>

<script>

    class TaskEdit {

        constructor() {
            this.init()
            this.updateDateInputs()
        }

        init() {

            $('#date-type').dropdown({
                onChange: function(value, text, $selectedItem) {
                    taskEdit.updateDateInputs()
                }
            })

            $('#modal-task-edit').modal({
                onShow: function () {
                    $('#day').calendar({
                        type: 'date'
                    });
                    $('#rangestart').calendar({
                        type: 'date',
                        endCalendar: $('#rangeend')
                    });
                    $('#rangeend').calendar({
                        type: 'date',
                        startCalendar: $('#rangestart')
                    });
                    $('#month').calendar({
                        type: 'month'
                    });
                },
                {#
                onDeny: function () {
                    window.alert('Wait not yet!');
                    return false;
                },
                onApprove: function () {
                    window.alert('Approved!');
                }
                #}
            })
        }

        updateDateInputs() {
            let value = $('#date-type').val()
            $('.date-type').hide()
            $('#date-type-' + value).show()
        }

    }

    const taskEdit = new TaskEdit();

</script>